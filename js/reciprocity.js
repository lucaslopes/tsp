"use strict";function agrupamentoReciprocidade(a){a.splice(0,0,[Infinity]);for(var b=[],c=0;c<a.length;c++)b.push([c]);for(;1<b.length;){for(var e=[],f=0;f<b.length;f++)e.push(findChosen(f,b,a));b=acheParidades(e,b)}return improveConnections(b[0],a)}function findChosen(a,b,c){for(var e=Infinity,f=[b[a][0],b[a][b[a].length-1]],g=[],h=0;h<b.length;h++)if(a!=h){f[2]=b[h][0],f[3]=b[h][b[h].length-1];for(var l=0;2>l;l++)for(var n,m=2;4>m;m++)n=getDist(f[l],f[m],c),n<e&&(g=[h,l],e=n)}return g}function acheParidades(a,b){for(var c=[],e=[],f=0;f<a.length;f++){var g=a[f][0],h=[];if(a[g][0]==f&&!contains(g,e)){switch(!0){case 0==a[f][1]&&0==a[g][1]:b[f].reverse(),h=b[f].concat(b[g]);break;case 0==a[f][1]&&1==a[g][1]:h=b[g].concat(b[f]);break;case 1==a[f][1]&&0==a[g][1]:h=b[f].concat(b[g]);break;case 1==a[f][1]&&1==a[g][1]:b[f].reverse(),h=b[g].concat(b[f]);}e.push(f,g)}0<h.length&&c.push(h)}for(var l=0;l<b.length;l++)contains(l,e)||c.push(b[l]);return c}function improveConnections(a,b){for(var c=1;c<a.length-2;c++){var e=a[c-1],f=a[c],g=a[c+1],h=a[c+2];if(getDist(e,f,b)+getDist(f,g,b)+getDist(g,h,b)>getDist(e,g,b)+getDist(g,f,b)+getDist(f,h,b)){var l=[a[c+1],a[c]];a[c]=l[0],a[c+1]=l[1]}}return a}function getDist(a,b,c){var e;return e=a>b?c[a][b]:c[b][a],e}function contains(a,b){for(var c=0;c<b.length;c++)if(a==b[c])return!0;return!1}
